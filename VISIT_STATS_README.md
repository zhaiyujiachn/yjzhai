# 访问量趋势图功能说明

## 功能特点

1. **基于不蒜子数据**：直接使用不蒜子的访问量数据进行统计和绘图
2. **智能数据记录**：自动记录每日不蒜子访问量变化，计算日增量
3. **趋势图展示**：显示近30天的每日新增访问量趋势
4. **自动更新**：每天自动更新统计数据
5. **数据持久化**：使用localStorage保存历史访问数据
6. **响应式设计**：适配各种屏幕尺寸

## 功能组件

### 统计面板
- **今日访问量**：显示当天的新增访问次数
- **昨日访问量**：显示昨天的新增访问次数  
- **总访问量**：显示不蒜子的累计访问次数

### 趋势图
- 使用Chart.js绘制折线图
- 显示近30天的每日新增访问量变化
- 支持鼠标悬停查看详细数据
- 美观的渐变填充效果

## 技术实现

### 数据来源与记录
- **主数据源**：不蒜子访问统计服务
- **记录机制**：监听不蒜子数据加载，自动记录每日总访问量
- **增量计算**：通过对比前一天的总量计算每日新增访问量
- **数据格式**：
  ```javascript
  {
    "2025-01-XX": {
      "total": 1234,      // 当日累计总访问量
      "daily": 56,        // 当日新增访问量
      "timestamp": 1234567890  // 记录时间戳
    }
  }
  ```

### 智能数据处理
- **首次记录**：如果没有历史数据，使用合理估算值
- **数据验证**：确保访问量数据的合理性和连续性
- **异常处理**：处理不蒜子加载失败的情况
- **数据清理**：自动清理60天前的过期数据

### 自动更新机制
- 页面加载时检查不蒜子数据并记录
- 每小时检查一次日期变化
- 跨天时自动更新统计显示和趋势图
- 实时同步不蒜子的总访问量

## 使用说明

### 正常使用
系统会自动工作，无需任何手动操作：

1. **首次访问**：系统开始记录不蒜子数据
2. **每日记录**：自动计算并记录每日新增访问量
3. **趋势展示**：实时更新近30天的访问量趋势图
4. **数据同步**：总访问量与不蒜子保持同步

### 测试功能
如需测试趋势图效果，可以：

1. 打开浏览器开发者工具（F12）
2. 在控制台中加载演示数据：
   ```javascript
   // 加载演示脚本
   const script = document.createElement('script');
   script.src = './demo-data.js';
   document.head.appendChild(script);
   
   // 等待脚本加载后运行
   setTimeout(() => {
       generateRealisticData(); // 生成真实模拟数据
       // 或者
       generateDemoData(); // 生成随机演示数据
   }, 1000);
   ```

3. 查看和管理数据：
   ```javascript
   viewCurrentData(); // 查看当前数据
   clearDemoData();   // 清除测试数据
   ```

## 数据准确性

### 优势
- **真实数据**：基于不蒜子的真实访问统计
- **准确计算**：通过差值计算得出精确的日增量
- **持续记录**：长期积累形成完整的访问趋势

### 注意事项
- **初始化期**：首次使用时可能需要几天时间积累数据
- **数据连续性**：如果某天没有访问页面，该天数据可能为0
- **浏览器依赖**：数据存储在浏览器本地，清除浏览器数据会丢失历史记录

## 样式特点

- **渐变背景**：使用紫色渐变背景，现代感十足
- **玻璃态效果**：统计卡片采用毛玻璃效果
- **悬停动画**：鼠标悬停时卡片上浮效果
- **响应式布局**：移动端友好的布局设计

## 文件结构

```
├── index.html          # 主页面（包含统计区域）
├── css/style.css       # 样式文件（包含统计样式）
├── js/script.js        # 脚本文件（包含统计逻辑）
└── demo-data.js        # 演示数据生成器
```

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

支持所有现代浏览器的localStorage、Canvas API和MutationObserver。

## 技术优势

1. **数据真实性**：直接基于不蒜子的真实访问数据
2. **自动化程度高**：无需手动干预，全自动记录和更新
3. **性能优化**：智能的数据加载和图表更新机制
4. **错误处理**：完善的异常处理和降级方案
5. **数据管理**：自动清理过期数据，避免存储空间浪费

## 与不蒜子的关系

- **完全兼容**：保持原有不蒜子统计的完整功能
- **数据增强**：在不蒜子基础上增加趋势分析功能
- **无冲突**：不影响不蒜子的正常工作
- **智能同步**：总访问量始终与不蒜子保持一致